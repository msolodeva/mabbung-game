# 작은 마리오 게임

마리오 스타일의 플랫포머 게임입니다. Python과 Pygame으로 구현되었습니다.

## 프로젝트 구조

리팩터링을 통해 코드가 여러 모듈로 분리되어 있습니다:

```
mario/
├── game.py              # 메인 게임 로직 (게임 실행)
├── constants.py         # 게임 설정 및 상수
├── sprites.py           # 스프라이트 생성 함수
├── player.py            # 플레이어 클래스
├── entities.py          # 엔티티 관리 (적, 아이템, 플랫폼)
├── level.py             # 레벨 생성 및 관리
├── renderer.py          # 렌더링
├── collision.py         # 충돌 처리
├── pyproject.toml       # uv 프로젝트 설정
└── game_original.py     # 원본 코드 (백업)
```

## 모듈 설명

### `constants.py`
- 게임의 모든 상수와 설정값을 정의합니다
- 화면 크기, 색상, 물리 엔진 값 등

### `sprites.py`
- 게임 캐릭터와 오브젝트의 스프라이트를 생성하는 함수들
- 플레이어, 적, 버섯, 물고기, 거북이, 공룡, 불똥 등

### `player.py`
- `Player` 클래스: 플레이어의 모든 동작과 상태 관리
- 이동, 점프, 수영, 공룡 탑승 등의 기능
- 크기 변경(작음/큼), 무적 시간 관리

### `entities.py`
- `EntityManager` 클래스: 게임의 모든 엔티티를 관리
- 플랫폼, 적, 아이템, 바다, 불똥 등
- 각 엔티티의 업데이트 로직과 화면 밖 정리

### `level.py`
- `LevelGenerator` 클래스: 무한 레벨 생성
- 랜덤 플랫폼, 적, 아이템 배치
- 바이옴 시스템 (땅/바다)

### `renderer.py`
- `Renderer` 클래스: 모든 게임 요소를 화면에 그리기
- 카메라 시스템 적용
- 물결 효과 등 시각적 효과

### `collision.py`
- `CollisionHandler` 클래스: 충돌 감지 및 처리
- 플레이어와 적, 아이템, 장애물 등의 충돌
- 게임 규칙 적용 (점수, 피해, 게임 오버 등)

### `game.py`
- `Game` 클래스: 게임 메인 로직
- 게임 루프, 입력 처리, 상태 관리
- 모든 모듈을 조합하여 게임을 실행

## 게임 실행

이 프로젝트는 [uv](https://docs.astral.sh/uv/)를 사용하여 의존성을 관리합니다.

```bash
# 의존성 설치 및 게임 실행
uv run game.py
```

## 조작법

- **←/→**: 좌우 이동
- **스페이스바 / ↑**: 점프 (물속에서는 위로 수영)
- **↓**: 물속에서 아래로 수영
- **왼쪽 Shift**: 공룡 탑승 시 불똥 발사

## 게임 요소

### 플레이어
- 체력이 3개의 하트로 표시됩니다 (화면 오른쪽 상단)
- 작은 상태와 큰 상태가 있습니다
- 적이나 가시에 닿으면 하트가 1개 감소합니다
- 하트가 0이 되면 게임 오버입니다
- 버섯을 먹으면 체력이 1 회복되고 크기가 커집니다 (최대 3하트)
- 공룡을 타면 빨라지고 불똥을 쏠 수 있습니다

### 적
- **일반 적**: 좌우로 걷습니다
- **점프 적**: 깡충깡충 뛰어다닙니다
- **물고기**: 바다 위를 헤엄칩니다
- **거북이**: 바다 속을 천천히 움직입니다
- **해파리**: 위아래로 떠다닙니다

### 아이템
- **동전**: 점수 획득
- **버섯**: 플레이어를 크게 만듭니다
- **공룡**: 탑승하여 특수 능력 사용

### 장애물
- **가시**: 닿으면 게임 오버
- **산호**: 바다 속 장애물

### 플랫폼
- **일반 플랫폼**: 고정된 발판
- **움직이는 플랫폼**: 좌우로 움직입니다
- **수직 플랫폼**: 위아래로 움직입니다
- **부서지는 플랫폼**: 서 있으면 부서집니다
- **스프링**: 밟으면 높이 점프합니다

### 바이옴
- **땅**: 기본 지형
- **바다**: 수영이 가능한 지형

## 리팩터링 주요 개선사항

1. **모듈화**: 1092줄의 단일 파일을 8개의 모듈로 분리
2. **클래스 기반**: 관련 기능을 클래스로 그룹화
3. **가독성**: 함수와 변수에 명확한 이름과 주석 추가
4. **유지보수성**: 각 모듈이 단일 책임을 가짐
5. **확장성**: 새로운 기능 추가가 쉬운 구조

## 원본 코드

원본 코드는 `game_original.py`에 백업되어 있습니다.

